:root {
  --anim-speed: 3s;
  --spin-progress: running;
  --door-swing: paused;
}

body {
  background: #1d1e22;
  display: flex;
  place-content: center;
  place-items: center;
  min-height: 100vh;
  max-height: 100vh;
  min-width: 100vw;
  max-width: 100vw;
  overflow: hidden;
  position: relative;
}

#puppet-hero {
  position: absolute;
  height: 5rem;
  width: 5rem;
  top: 7em;
  border: 2px solid white;
  background: #4f959d;
  display: flex;
  place-content: center;
  border-radius: 20% 20% 0 0;
  z-index: 5;
  animation: hop 1s ease-in-out infinite;
}

#cart {
  --main-bg: #205781;
  background: var(--main-bg);
  --cart-transform: translate(-50%, 0);
  --size: 20em;
  --size-half: calc(var(--size) / 2);
  --window-dist: calc(var(--size) * 0.4);
  position: absolute;
  left: 50vw;
  transform: var(--cart-transform);
  bottom: calc(var(--size) / 4);
  width: var(--size);
  height: var(--size);
  border: 2px solid #f6f8d5;
  border-radius: 1em;
  display: flex;
  place-content: center;
  place-items: center;
  animation: slideIn var(--anim-speed) ease-in forwards;
  perspective: 1000px;
  background-image: url(https://www.transparenttextures.com/patterns/dark-wood.png);
}
#cart:before {
  content: "";
  width: var(--size);
  height: var(--window-dist);
  border: 2px solid #f6f8d5;
  position: absolute;
  bottom: 0;
  background: var(--main-bg);
  z-index: 20;

  background-image: url(https://www.transparenttextures.com/patterns/dark-wood.png);
}

#window {
  position: absolute;
  bottom: var(--window-dist);
  width: calc(var(--size) * 0.8);
  height: var(--size-half);
  border: 2px solid red;
  display: flex;
  justify-content: space-between;
  background: #205781;
  filter: grayscale(0.5);
  background-image: url(https://www.transparenttextures.com/patterns/dark-wood.png);
}

#windoor {
  position: relative;
  background: var(--main-bg);
  width: 50%;
  height: 10em;
  border: 2px solid #f6f8d5;
  z-index: 10000;
  filter: grayscale(0);
  transform-origin: center left;
  backface-visibility: visible;
  transform-style: preserve-3d;
  animation: swingOpenL 1s ease-in-out forwards;
  animation-play-state: var(--door-swing);
  background-image: url(https://www.transparenttextures.com/patterns/dark-wood.png);
}

#windoor.r {
  transform-origin: center right;
  animation: swingOpenR 1s ease-in-out forwards;
  animation-play-state: var(--door-swing);
}

#wheel {
  --size: 10em;
  --size-half: calc(var(--size) / 2);
  position: absolute;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  bottom: calc(var(--size-half) * -1);
  display: flex;
  place-content: center;
  place-items: center;
  background: repeating-conic-gradient(black 0deg 10deg, gray 10deg 20deg);
  box-shadow: inset 0 0 20px #000000aa;
  animation: spin var(--anim-speed) linear;
  animation-play-state: var(--spin-progress);
  z-index: 40;
}

#wheel.l {
  left: calc(var(--size-half) * -1);
}

#wheel.r {
  right: calc(var(--size-half) * -1);
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes slideIn {
  0% {
    left: -200px;
  }
  90% {
    left: 50%;
    transform: var(--cart-transform) rotate(-5deg);
  }
  95% {
    left: calc(50% + 0.2em);
    transform: var(--cart-transform) rotate(3deg);
  }
  100% {
    left: 50%;
  }
}

@keyframes hop {
  0% {
    transform: translateY(-5px);
  }
  100% {
    transform: translateY(20px);
  }
}

@keyframes swingOpenL {
  0% {
    transform: rotateY(0deg);
  }
  95% {
    /*     filter: grayscale(0); */
  }
  100% {
    transform: rotateY(-120deg);
    /*     filter: grayscale(0.1); */
  }
}

@keyframes swingOpenR {
  0% {
    transform: rotateY(0deg);
  }
  95% {
    /*     filter: grayscale(0); */
  }
  100% {
    transform: rotateY(120deg);
    /*     filter: grayscale(0.1); */
  }
}