<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Robot Arm ü¶æ</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="./script.js" defer></script>
</head>

<body>
  <div id="info">
    <div><strong>Base Position:</strong> X:<span id="a1"></span>cm Y:<span id="a2"></span>cm</div>
    <div><strong>Arm Joints:</strong> Shoulder:<span id="a3"></span>¬∞ Elbow:<span id="a4"></span>¬∞ Wrist:<span
        id="a5"></span>¬∞</div>
    <div><strong>3D Orientation:</strong> Roll:<span id="roll"></span>¬∞ Pitch:<span id="pitch"></span>¬∞ Yaw:<span
        id="yaw"></span>¬∞</div>
    <div><strong>Gripper:</strong> <span id="gripper"></span>¬∞</div>
    <div><strong>End Position:</strong> X:<span id="endX"></span>cm Y:<span id="endY"></span>cm Z:<span
        id="endZ"></span>cm</div>
    <div class="key-help">üöó Base: Q/A(X) W/S(Y) | ü¶æ Arm: E/D(Shoulder) R/F(Elbow) T/G(Wrist)</div>
    <div class="key-help">üéØ 3D Orient: Y/H(Roll) U/J(Pitch) I/K(Yaw) | ü§è Grip: O/L</div>
    <div class="range-info">üéÆ 9-DOF Mobile Robot Arm with 3D Orientation Control</div>
    <div class="status" id="status">Ready</div>
  </div>

  <div id="controls">
    <div class="control-panel">
      <div class="control-section">
        <h3>üöó Base Translation</h3>
        <div class="keyboard-grid-2col">
          <div class="joint-control">
            <label>X Position</label>
            <div class="key-pair">
              <div class="key-btn" data-key="q">Q</div>
              <div class="key-btn" data-key="a">A</div>
            </div>
          </div>
          <div class="joint-control">
            <label>Y Position</label>
            <div class="key-pair">
              <div class="key-btn" data-key="w">W</div>
              <div class="key-btn" data-key="s">S</div>
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3>ü¶æ Arm Joints</h3>
        <div class="keyboard-grid-3col">
          <div class="joint-control">
            <label>Shoulder</label>
            <div class="key-pair">
              <div class="key-btn" data-key="e">E</div>
              <div class="key-btn" data-key="d">D</div>
            </div>
          </div>
          <div class="joint-control">
            <label>Elbow</label>
            <div class="key-pair">
              <div class="key-btn" data-key="r">R</div>
              <div class="key-btn" data-key="f">F</div>
            </div>
          </div>
          <div class="joint-control">
            <label>Wrist</label>
            <div class="key-pair">
              <div class="key-btn" data-key="t">T</div>
              <div class="key-btn" data-key="g">G</div>
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3>üéØ 3D Orientation (Euler Angles)</h3>
        <div class="keyboard-grid-3col">
          <div class="joint-control">
            <label>Roll (X-axis)</label>
            <div class="key-pair">
              <div class="key-btn" data-key="y">Y</div>
              <div class="key-btn" data-key="h">H</div>
            </div>
          </div>
          <div class="joint-control">
            <label>Pitch (Y-axis)</label>
            <div class="key-pair">
              <div class="key-btn" data-key="u">U</div>
              <div class="key-btn" data-key="j">J</div>
            </div>
          </div>
          <div class="joint-control">
            <label>Yaw (Z-axis)</label>
            <div class="key-pair">
              <div class="key-btn" data-key="i">I</div>
              <div class="key-btn" data-key="k">K</div>
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3>ü§è Gripper</h3>
        <div class="keyboard-grid-1col">
          <div class="joint-control">
            <label>Open/Close</label>
            <div class="key-pair">
              <div class="key-btn" data-key="o">O</div>
              <div class="key-btn" data-key="l">L</div>
            </div>
          </div>
        </div>
      </div>

      <div class="control-section">
        <h3>Actions</h3>
        <div class="action-controls">
          <button id="pick" class="action-btn">Pick Ball</button>
          <button id="wave" class="action-btn">Wave</button>
          <button id="home" class="action-btn">Home</button>
          <button id="reach" class="action-btn">Reach Ball</button>
        </div>
      </div>
    </div>
  </div>

  <svg id="arm" viewBox="0 0 600 500">
    <!-- Isometric 3D definitions -->
    <defs>
      <!-- Gradients for 3D effect -->
      <linearGradient id="metalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#e8e8e8;stop-opacity:1" />
        <stop offset="50%" style="stop-color:#d0d0d0;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#b0b0b0;stop-opacity:1" />
      </linearGradient>

      <linearGradient id="jointGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#666;stop-opacity:1" />
        <stop offset="50%" style="stop-color:#888;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#444;stop-opacity:1" />
      </linearGradient>

      <linearGradient id="floorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#444;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#222;stop-opacity:1" />
      </linearGradient>

      <!-- Grid pattern for floor -->
      <pattern id="gridPattern" patternUnits="userSpaceOnUse" width="30" height="30">
        <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#555" stroke-width="0.5" opacity="0.5" />
      </pattern>

      <!-- Arrow markers for axes -->
      <marker id="arrowX" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="#ff3b30" />
      </marker>
      <marker id="arrowY" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="#30d158" />
      </marker>
      <marker id="arrowZ" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="#007aff" />
      </marker>
    </defs>

    <!-- Isometric floor (diamond/rhombus shape) -->
    <g id="floor">
      <polygon points="300,450 100,350 300,250 500,350" fill="url(#floorGradient)" stroke="#666" stroke-width="2" />

      <!-- Grid overlay on floor -->
      <clipPath id="floorClip">
        <polygon points="300,450 100,350 300,250 500,350" />
      </clipPath>

      <g clip-path="url(#floorClip)">
        <rect x="100" y="250" width="400" height="200" fill="url(#gridPattern)" opacity="0.3" />
      </g>
    </g>

    <!-- Robot arm base at center of floor -->
    <g id="robot" transform="translate(300,420)">

      <!-- Base (rotates around Z-axis) -->
      <g id="s1">
        <!-- Base cylinder (isometric view) -->
        <ellipse cx="0" cy="10" rx="20" ry="10" fill="#333" opacity="0.3" />
        <polygon points="-20,0 20,0 20,10 -20,10" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />
        <ellipse cx="0" cy="0" rx="20" ry="10" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />

        <!-- Shoulder joint -->
        <g id="s2" transform="translate(0,-15)">
          <!-- Shoulder link (isometric cylinder) -->
          <polygon points="-8,-60 8,-60 8,0 -8,0" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />
          <ellipse cx="0" cy="0" rx="8" ry="4" fill="url(#jointGradient)" stroke="#444" stroke-width="1" />
          <ellipse cx="0" cy="-60" rx="8" ry="4" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />

          <!-- Elbow joint -->
          <g id="s3" transform="translate(0,-60)">
            <!-- Elbow link -->
            <polygon points="-6,-50 6,-50 6,0 -6,0" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />
            <ellipse cx="0" cy="0" rx="6" ry="3" fill="url(#jointGradient)" stroke="#444" stroke-width="1" />
            <ellipse cx="0" cy="-50" rx="6" ry="3" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />

            <!-- Wrist joint -->
            <g id="top" transform="translate(0,-50)">
              <!-- Wrist link -->
              <polygon points="-4,-30 4,-30 4,0 -4,0" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />
              <ellipse cx="0" cy="0" rx="4" ry="2" fill="url(#jointGradient)" stroke="#444" stroke-width="1" />
              <ellipse cx="0" cy="-30" rx="4" ry="2" fill="url(#metalGradient)" stroke="#666" stroke-width="1" />

              <!-- End effector/Gripper -->
              <g id="pincer" transform="translate(0,-30)">
                <!-- Gripper base -->
                <polygon points="-6,-8 6,-8 6,0 -6,0" fill="#007aff" stroke="#0066cc" stroke-width="1" />
                <ellipse cx="0" cy="0" rx="6" ry="3" fill="url(#jointGradient)" stroke="#444" stroke-width="1" />

                <!-- Gripper jaws (isometric view) -->
                <g id="pl">
                  <polygon points="-10,-12 -6,-12 -6,0 -10,0" fill="#ff3b30" stroke="#cc0000" stroke-width="1" />
                  <polygon points="-10,-12 -8,-15 -6,-12 -6,0 -8,3 -10,0" fill="#ff6b60" stroke="#cc0000"
                    stroke-width="1" />
                </g>
                <g id="pr">
                  <polygon points="6,-12 10,-12 10,0 6,0" fill="#ff3b30" stroke="#cc0000" stroke-width="1" />
                  <polygon points="6,-12 8,-15 10,-12 10,0 8,3 6,0" fill="#ff6b60" stroke="#cc0000" stroke-width="1" />
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </g>

    <!-- Ball on floor (isometric positioning) -->
    <g id="ballGroup">
      <ellipse id="ballShadow" cx="450" cy="385" rx="8" ry="4" fill="#000" opacity="0.3" />
      <circle id="ball" cx="450" cy="375" r="12" fill="#30d158" stroke="#007f0e" stroke-width="2" />
      <circle cx="450" cy="375" r="12" fill="none" stroke="#ffffff" stroke-width="1" opacity="0.4" />
      <circle cx="445" cy="370" r="3" fill="#ffffff" opacity="0.6" />
    </g>

    <!-- Reference axes (bottom left) -->
    <g id="axes" transform="translate(50,450)">
      <line x1="0" y1="0" x2="40" y2="0" stroke="#ff3b30" stroke-width="2" marker-end="url(#arrowX)" />
      <line x1="0" y1="0" x2="-20" y2="-35" stroke="#30d158" stroke-width="2" marker-end="url(#arrowY)" />
      <line x1="0" y1="0" x2="0" y2="-40" stroke="#007aff" stroke-width="2" marker-end="url(#arrowZ)" />
      <text x="45" y="5" fill="#ff3b30" font-size="14" font-weight="bold">X</text>
      <text x="-35" y="-35" fill="#30d158" font-size="14" font-weight="bold">Y</text>
      <text x="5" y="-45" fill="#007aff" font-size="14" font-weight="bold">Z</text>
    </g>

    <!-- Floor boundary indicator -->
    <text x="300" y="470" text-anchor="middle" fill="#666" font-size="10" opacity="0.7">Floor Level</text>

    <!-- End effector position indicator -->
    <circle id="endEffectorPos" cx="0" cy="0" r="3" fill="#ff9500" opacity="0.7" stroke="#ff6b00" stroke-width="1" />
  </svg>
</body>

</html>